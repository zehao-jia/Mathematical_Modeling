# 层次分析法
## 模型引出
- 决策:面对多指标选择最优解
- 统一数量级:将指标所在数组做归一化处理
- 指标的重要性是不同的$\rightarrow$给指标加权重$\rightarrow$层次分析法(AHP)
### 基本概念
- 首先:将问题条理化层次化,构建一个有层次的模型
- 步骤:
- ![屏幕截图 2025-09-24 211608.png](%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-09-24%20211608.png)
- 简单解释一下各层:
- 最高层:我想喝一杯奶茶
- 中间层:口味,价格,距离
- 最底层:瑞幸,雪王
> 1. 建立递阶层次结构模型
> 2. 两两比较,构造各层次中的所有判断矩阵

![屏幕截图 2025-09-24 204116.png](%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-09-24%20204116.png)
- 由于两两比较的过程中忽略了其他因素,可能出现矛盾$\rightarrow$一致性检验

### 一致性检验
- 理论上,有$a_{ij} = \frac{i的重要程度}{j的重要程度}$
- 因此,若两个矩阵各行(列)成倍数关系,则称他们是一致矩阵
- ***注意:在使用判断矩阵进行求权重之前,必须进行一致性检验***
- *原理:检验构造的判断矩阵和一致性矩阵是否有太大的差别*

#### 对一致性检验的证明
- 引理:A为n阶方阵,且r(A) = 1, 则A有一个特征值为tr(A)其余特征值为0
- 对于一个一致矩阵,它他有一个特征值为n其余均为零
- 特征值为n时,对应的特征向量刚好为$k[\frac{1}{a_{11}}\cdots\frac{1}{a_{1n}}]^T$
- n阶正互反矩阵的最大特征值和n越接近,一致性越高

#### 一致性检验步骤
- 计算一致性指标CI
- $CI =\frac{\lambda_{max}-n}{n-1}$
- 查找对应的平均随机一致性指标RI(纯查表)
- $CR =\frac{CI}{RI} $
- cr=0:矩阵是一致性矩阵
- cr<0.1:矩阵一致
- cr>=0.1:不彳亍

### 求权重
#### 算数平均法求权重
- 按列归一化
- 按行求和
- 将相加结果每个元素除以n
